<!DOCTYPE html>
<html>
<body>
<h1>Hello World</h1>
<p>I'm hosted with GitHub Pages.</p>
<p>Genesys Cloud Web Messenger</p>
</body>

<input id="msg" placeholder="Type message here" />
<button onclick="startConversation()">Start Conversation</button>
<button onclick="sendMessage()">Send Message</button>
  
<script type="text/javascript" charset="utf-8">
  (function (g, e, n, es, ys) {
    g['_genesysJs'] = e;
    g[e] = g[e] || function () {
      (g[e].q = g[e].q || []).push(arguments)
    };
    g[e].t = 1 * new Date();
    g[e].c = es;
    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
  })(window, 'Genesys', 'https://apps.mypurecloud.jp/genesys-bootstrap/genesys.min.js', {
    environment: 'prod-apne1',
    deploymentId: 'be7b456d-7625-4f4f-83b3-ed30ebf47cc2'
  });
</script>   

  <script>
/* Start Messaging Service */
Genesys("command", "MessagingService.start");

/* Start Conversation */
function startConversation() {
  Genesys("command", "MessagingService.startConversation",
    {},
    function () {
      console.log("Conversation started");
    },
    function (err) {
      console.error("Failed to start conversation", err);
    }
  );
}

/* Send Message */
function sendMessage() {
  var text = document.getElementById("msg").value;
  if (!text) return;

  Genesys("command", "MessagingService.sendMessage",
    { body: text },
    function () {
      console.log("Message sent to Genesys Cloud");
    },
    function (err) {
      console.error("Send failed", err);
    }
  );
}

/* Receive Messages */
Genesys("subscribe", "MessagingService.messagesReceived", function (e) {
  console.log("Message received from Genesys:", e);
});
</script>
</html>
